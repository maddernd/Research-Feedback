---
title: Writing the Code
sidebar:
  label: " - Writing the Code"
---
import { YouTube } from 'astro-embed';

:::note
Your goal in this stage is to convert your ideas (in this case the pseudocode we have provided) into C# code. This is the coding side of programming.
:::

<div class="not-content">
  <YouTube id="aBBO5mpbhHM" params="fs=1&modestbranding=1&rel=0&autoplay=1"/>
</div>

The pseudocode shows the instructions we need to get this program working. At this stage these instructions need to be translated into source code, so that they can be compiled and the resulting program tested.

You have seen the syntax details for how to create [programs](../../1-concepts/00-program), [variables](../../1-concepts/07-variable), and [constants](../../1-concepts/07-variable#constants), and how to code the instructions for [method calls](../../1-concepts/03-method-call) and [assignment statements](../../1-concepts/08-assignment-statement). Now all you need to do is apply those rules with the ideas captured in our pseudocode, and you will have something you can compile.

:::note
The next chapter, [Communicating Syntax](../../../2-communicating-syntax/0-overview), is all about how to read and use the syntax diagrams that we have used to outline the syntax. For now you can use the examples to give you a good idea of how to code these instructions. To use the syntax diagrams directly you would:

1. Find the page with the syntax rule you are interested in using.
2. Have a quick look at the syntax diagram and the rules it contains. Read each rule and get a basic feel for how it is going to come together for your program.
3. Read the example to see one way of using the rule. The syntax diagram can be used to create any number of variations of the rule, and the example gives you at least one way these rules can be coded.
4. Return to the diagram and make sure you can match each part of the example back to the rule that created it.
5. Look up any related rules that are not explained on this rule's page.

:::

## The Pseudocode Plan

Over the last few pages we have worked through fleshing out our plan for the program, and we have captured it in the following pseudocode. In this page we can now turn this plan into code.

```txt
Constants:
    TWO_DOLLARS = 200;
    ONE_DOLLAR = 100;
    FIFTY_CENTS = 50;
    TWENTY_CENTS = 20;
    TEN_CENTS = 10;
    FIVE_CENTS = 5;

Variables:
    costOfItem - integer
    amountPaid - integer
    changeValue - integer
    toGive - integer

Steps:
    Get the details from the user.
        Get the cost (store in costOfItem)
        Get the amount paid (store in amountPaid)
    Calculate the amount of change to provide
        (changeValue = amountPaid - costOfItem)
    Give change
        Give $2 coins
            Calculate the number of $2 coins to give
                (toGive = changeValue / TWO_DOLLARS)
            Update the amount of change remaining to give
                (changeValue = changeValue - toGive * TWO_DOLLARS)
            Output the number of $2 coins to give - using Write

        Give $1 coins (as with $2 above but with ONE_DOLLAR)
            Calculate the number of $1 coins to give
            Update the amount of change remaining to give
            Output the number of $1 coins to give - using Write

        Give 50c coins (...)
            Calculate the number of 50c coins to give
            Update the amount of change remaining to give
            Output the number of 50c coins to give - using Write

        Give 20c coins
            Calculate the number of 20c coins to give
            Update the amount of change remaining to give
            Output the number of 20c coins to give - using Write

        Give 10c coins
            Calculate the number of 10c coins to give
            Update the amount of change remaining to give
            Output the number of 10c coins to give - using Write

        Give 5c coins
            Calculate the number of 5c coins to give
            Update the amount of change remaining to give
            Output the number of 5c coins to give - using Write
```


## Start your project

Remember the steps to get going with a new program:

1. Open the terminal
2. `cd` to your **code** folder (or whereever you store your projects)
3. `mkdir` a folder for your new project -- perhaps **ChangeCalculator** in this case
4. `cd` to your new folder
5. Run `dotnet new console`
6. Run `code .`

This will set up the project through the terminal, then launch VS Code to get started coding.

All that's left is to convert the pseudocode to C# code. Have a go at this yourself.

:::tip[Andrew's tip]
I'd suggest the following process:

- Declare the constants first.
- Open a terminal and build to make sure you have no errors.
- Read in the values from the user, and output them just to check.
- Run it in the terminal.
- Calculate the change, output that, and run again.
- Add each coins calculation one at a time - building and running as you go.

Code is easy to make mistakes with, so build a little and test how it is going. Do not write this all at once. That usually results in it taking longer.
:::

:::tip[Need help with the syntax?]

Memorising the syntax of a programming language is an important step as you start coding. If you don't feel confident with the syntax yet, remember you can go back and check the syntax and examples in the concepts section.
:::

### Creating the program

To start we need to create the program. There is nothing particular special we need to do in C# at this stage, however we do need access to methods in the Console and Convert class.

This will give us something like this as a start:

```cs
// We need System.Console to use WriteLine and ReadLine
using static System.Console;
// We need System.Convert to convert input into numbers
using static System.Convert;
```

### Creating constants

The next things in our pseudocode are the constants. You can check the syntax details on the [constants](../../1-concepts/07-variable) page, and start coding the `TWO_DOLLAR` constant as shown below. 

```cs
// We need System.Console to use WriteLine and ReadLine
using static System.Console;
// We need System.Convert to convert input into numbers
using static System.Convert;

// Constants for the coin values
const int TWO_DOLLARS = 200;
```

:::tip
C# coding convention uses UPPER_CASE for constant names.
:::

### Variables

The next things in our pseudocode are the variables that we will need. We can code these up in much the same way as we did with the constants.

```cs
// We need System.Console to use WriteLine and ReadLine
using static System.Console;
// We need System.Convert to convert input into numbers
using static System.Convert;

// Constants for the coin values
const int TWO_DOLLARS = 200;
//... the others here

int costOfItem;
```

:::tip
C# coding convention uses camelCase for variable names.
:::

### Method calls

The next steps require us to think a little, as our pseudocode will need a few steps. The first part is to "Get the data from the user". This involves the step "Get the cost (store in costOfItem)".

*How can we achieve this?*

We are going to be interacting with the user in the Terminal. They will need to be told that they need to enter the cost of the item when we get to this step. To achieve this we can call the `Write` or `WriteLine` method. These will be our go-to methods for prompting the user for action or providing them with output when we write a terminal based program.

Once the user knows what to enter, they will be able to provide us with these details. To access these, we can use the `ReadLine` method. This will be our go-to method for reading input from the user in the Terminal. In this case, we will also need to convert this to an integer. We can use Convert's `ToInt32` method for this.

Once we have converted the data to an integer, we can store it in the `costOfItem` variable using an [assignment statement](../../1-concepts/08-assignment-statement).

The code of this is shown below.

```cs
// We need System.Console to use WriteLine and ReadLine
using static System.Console;
// We need System.Convert to convert input into numbers
using static System.Convert;

// Constants for the coin values
const int TWO_DOLLARS = 200;
//... the others here

int costOfItem;
//... the others here

// Get the data from the user
Write("Cost of item in cents: ");
costOfItem = ToInt32(ReadLine());

```

You can now keep going through the steps in the pseudocode to convert the idea for this program into instructions the computer can run. Our version of the code is in the [wrap up section](../../5-wrap-up/1-change) at the end of the chapter. Try not to look, but if you get stuck you can check so that you can keep progressing. When you do need to check, take notes and go back to study that concept or code. This will help you fill in any gaps in your understanding.

## Compiling and Running

As you build small parts of the code, you need to compile and run the program to test how it is coming along.

1. Open the [terminal](../../../../part-0-getting-started/2-computer-use/1-concepts/01-terminal), or use the integrated terminal in VS Code (**ctrl-\`** or **cmd-\`** is the shortcut for this).
2. Use the `cd` command to move to the directory with your code, for example `cd ~/Documents/Code/ChangeCalculator`.
3. Compile using `dotnet build`.
4. Fix any compiler errors, using the tips below on how to approach this.
5. Execute the program using `dotnet run` and check the results.

There are a couple of terminal shortcuts that can help you here:

- Use the **tab** key to autocomplete filenames in any path. For example, the above `cd` command can be achieved using `cd ~/Doc<TAB>/Co<TAB>/Ch<TAB>`. You have to make sure that you have enough characters to have a unique file or folder. Your home directory probably has "Documents" and "Downloads" folders, so "Doc" is the shortest amount of text that will uniquely identify that we want the "**Doc**uments" folder.
- Press the **up arrow** to cycle through previous commands. Once you have entered the commands to build and run the program the first time, you can switch back to that same terminal and press the "up arrow" to go back to the command to compile and run the program without typing it in again.

Using the tab key and up/down arrows can really help speed up using the terminal.

:::tip[Andrew's tip]
Get into the habit of frequently compiling and running your programs. I generally try to get one small piece of functionality coded, then compile and run to make sure that there aren't too many issues to resolve.
:::

## Compiler Errors

A compiler is a very sensitive piece of software. They require that you
follow the language's syntax *precisely*. One small mistake, and the
compiler will fail to compile your program and end with an error
message. This is a *good* thing! (Although it may not feel like it at
first.) Why? Because when programs become complicated we need exact
details to help us, and to ensure the program works the way we need it
to.

Here are some handy hints related to dealing with compiler errors.

1. **Know that errors are inevitable**. You will get compiler errors!
    As you gain more experience you will get fewer errors, but it will
    always be a rare event that everything is exactly as it should be
    the first time.

2. **Error messages may appear cryptic at first**. In many cases the
    compiler's error messages can appear cryptic. You need to learn to
    decode the messages the compiler gives you, and you will get better
    at this with practice.

3. **Start with the first error message, and do not move on until it is fixed**. The compiler will read your code 'top down'.
    So, the first error it outputs will be the first in the file. The
    problem is that the compiler will *try* to continue on, despite the
    error. This can mean that other errors further on in the output may
    actually be caused by the compiler being *confused* due to the first
    error. By fixing the first error you may also fix subsequent errors.

4. **Deal with one error at a time**. It is easy to feel
    overwhelmed when you see a huge list of errors, but do not be scared
    off! Start at the first error, and solve them one by one. Compile
    after fixing each problem to see if the others still exist.

5. **Do not add more code until the errors are fixed**. Compile your
    program frequently. Add small pieces of functionality, and then fix
    any syntax errors before adding anything else.
    Coding in this way makes sure that you do not get too many errors,
    and reduces the code you have to search in order to fix problems.

6. **Read the error message carefully**. The message will
    *try* to tell you what has gone wrong, and once you understand what
    the messages are trying to say you will be able to find and fix the
    issues quickly.

7. **Work out what the error messages mean**. Understanding the error
    messages will mean that you will know what to look for, and will
    help you avoid these errors in the future. If you're not sure what an
    error message means ask others developers or search for the message
    on the internet.

8. **Find the line and character number of the error**.
    One important detail in the error message will be the
    line number of the error. This gives you a starting point to help
    you locate the problem. It is important to note that this is where
    the compiler got to when it noticed the error - this *does not* mean
    this is where the error actually is (but it is a good place to start
    looking). You may need to look back one or more lines to find the
    actual source of the problem.

9.  **Watch for typos**. It is easy to mistype an identifier. When this
    happens the compiler will not know what to do (and it will complain
    about you trying to use 'unknown' things). Make sure you check for
    these tiny typos when you get errors related to the compiler not
    being able to find an identifier.

10. **When you get stuck ask for help**. Compiler errors
    are likely to be something small, but sometimes the causes are hard
    to find. If you get stuck, *ask for help*! Having access to other
    more experienced developers or even just someone who hasn't been
    staring at your code as long as you will be a valuable resource as you learn
    to program. Learning to program can be tough at times, and having
    someone who can help you when you get stuck will make all the
    difference.
